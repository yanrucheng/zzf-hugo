
{{ define "header" }}

  <style>
    .hero-image {
      filter: grayscale(50%); /* Start with greyscale */
      transition: filter 0.5s ease; /* Smooth transition to color */
    } 
  </style>

  {{ $featured_image := partial "func/GetFeaturedImage.html" . }}
  {{ $featured_image_class := site.Params.featured_image_class | default "cover bg-top" }}

  {{ $cover_dimming_class := "bg-black-40" }}
  {{ $background_color_class := site.Params.background_color_class | default "bg-black" }}

  {{ $featured_image_class := site.Params.featured_image_class | default "cover bg-bottom" }}
  <header class="{{ $featured_image_class }} h-100vh"
    style="background-image: url('{{ $featured_image }}');"
  >
    <div class="{{ $cover_dimming_class }} flex justify-between h-100">
      <!-- Middle section -->
      <div class="h-100 w-100">
        {{ partial "site-navigation.html" .}}
        <div class="">
          <div class="pv5 pv6-l ph3 ph4-ns db text-align-left {{ .Site.Params.title_font }}">
            <h1 class="mw7 f2 f-subheadline-l fw2 white-90 mb0 lh-title">
              {{ .Title | default .Site.Title }}
            </h1>
            {{ with .Params.description }}
              <h2 class="fw1 f5 f3-l white-80 measure-wide-l mt3">
                {{ . }}
              </h2>
            {{ end }}
          </div>
        </div>
      </div>
    </div>
  </header>

  <script>
    // JavaScript to control greyscale-to-color effect on scroll
    window.addEventListener("scroll", () => {
      const hero = document.querySelector(".hero-image");
      const scrollY = window.scrollY;

      // Calculate the percentage of scroll within the hero section
      const heroHeight = hero.offsetHeight;
      const scrollPercentage = Math.min(scrollY / heroHeight, 1);
      const grayscalePercentage = 50 * (1 - 3 * scrollPercentage);

      console.log(heroHeight, scrollPercentage, grayscalePercentage);

      // Adjust the grayscale filter based on scroll percentage
      hero.style.filter = `grayscale(${grayscalePercentage}%)`;
    });
  </script>

{{ end }}
{{ define "main" }}
  <div class="flex-l mt2 mw8 center overflow-hidden">
    <article class="center cf pv5 ph3 ph4-ns mw7">
      <div class="nested-copy-line-height lh-copy f4 nested-links {{ $.Param "text_color" | default "mid-gray" }} {{ .Site.Params.body_font }}">
        {{ .Content }}
      </div>
    </article>
  </div>
{{ end }}
{{ define "footer" }}{{ partial "site-footer.html" . }}{{ end }}
