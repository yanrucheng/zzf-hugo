
{{ define "header" }}

  <style>
    .hero-image {
      filter: grayscale(100%); /* Start with greyscale */
      transition: filter 0.5s ease; /* Smooth transition to color */
    } 
  </style>

  {{ $featured_image := partial "func/GetFeaturedImage.html" . }}
  {{ $featured_image_class := site.Params.featured_image_class | default "cover bg-top" }}

  {{ $cover_dimming_class := "bg-black-10" }}
  {{ $background_color_class := site.Params.background_color_class | default "bg-black" }}

  {{ $featured_image_class := site.Params.featured_image_class | default "cover bg-bottom" }}
  <header class="{{ $featured_image_class }} h-100vh hero-image"
    style="background-image: url('{{ $featured_image }}');"
  >
    <div class="{{ $cover_dimming_class }} h-100 w-100">
      {{ partial "site-navigation.html" .}}
      <div class="tc-l pv5 pv7-l ph3 ph4-ns flex items-center justify-center">
        <h1 class="f2 f-subheadline-l fw2 white-90 mb0 lh-title">
          {{ .Title | default .Site.Title }}
        </h1>
        {{ with .Params.description }}
          <h2 class="fw1 f5 f3-l white-80 measure-wide-l center mt3">
            {{ . }}
          </h2>
        {{ end }}
      </div>
    </div>
  </header>

  <script>
    // JavaScript to control greyscale-to-color effect on scroll
    window.addEventListener("scroll", () => {
      const hero = document.querySelector(".hero-image");
      const scrollY = window.scrollY;

      // Calculate the percentage of scroll within the hero section
      const heroHeight = hero.offsetHeight;
      const scrollPercentage = Math.min(scrollY / heroHeight, 1);

      // Adjust the grayscale filter based on scroll percentage
      hero.style.filter = `grayscale(${1 - scrollPercentage}00%)`;
    });
  </script>

{{ end }}
{{ define "main" }}
  <div class="flex-l mt2 mw8 center">
    <article class="center cf pv5 ph3 ph4-ns mw7">
      <div class="nested-copy-line-height lh-copy f4 nested-links {{ $.Param "text_color" | default "mid-gray" }}">
        {{ .Content }}
      </div>
    </article>
  </div>
{{ end }}
{{ define "footer" }}{{ partial "site-footer.html" . }}{{ end }}
