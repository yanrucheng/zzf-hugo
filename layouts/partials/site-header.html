{{- $featured_video := partial "func/GetFeaturedVideo.html" . -}}
{{- $featured_image := partial "func/GetFeaturedImage.html" . -}}

{{- $cover_dimming_class := site.Params.cover_dimming_class | default "bg-black-60" -}}
{{- $background_color_class := site.Params.background_color_class | default "bg-black" -}}
{{- $featured_video_y := .Page.Params.featured_video_y | default 0 -}}
{{- $title_class := .Params.custom_class.title_class | default "light-silver" -}}
{{- $title := .Title | default .Site.Title -}}
{{- $description := .Params.description -}}

<header class="
  {{ if $featured_video }}relative overflow-hidden inner-video-click-play
  {{ else if $featured_image }}{{ site.Params.featured_image_class | default "cover bg-top" }}
  {{ else }}pb3-m pb6-l{{ end }}
  {{ .Site.Params.primary_font }}"
>
  
  {{- if $featured_video -}}
    {{ partial "video" (dict 
      "page"         .Page
      "src"          $featured_video
      "controls"     "false"
      "autoplay"     "false"
      "loop"         "false"
      "muted"        "true"
      "custom_class" (printf "absolute w-100vw object-fit-cover z--1 translate-y-%d" $featured_video_y)
      "skip_file_exist_check" "true"
    ) }}
  {{- else if $featured_image -}}
    <div style="background-image: url('{{ $featured_image }}');"></div>
  {{- end -}}

  <div class="{{ $cover_dimming_class }} relative z-1 w-100 h-100">
    {{ partial "site-navigation.html" . }}
    <div class="tc-l pv4 pv6-l ph3 ph4-ns {{ .Site.Params.title_font }}">
      <h1 class="f2 f-subheadline-l fw2 white-90 mb0 lh-title">{{ $title }}</h1>
      {{- with $description -}}
        <h2 class="fw1 f5 f3-l white-80 measure-wide-l center mt3">{{ . }}</h2>
      {{- end -}}
    </div>
  </div>
</header>
